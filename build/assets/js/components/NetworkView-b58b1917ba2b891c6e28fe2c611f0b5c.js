//# sourceMappingURL=NetworkView.js.map
(function(){window.Octavia.NetworkView=({networkId:b})=>{const f=window.Octavia.api,{Badge:v,useAsync:n,Toast:w}=window.Octavia,[d,e]=React.useState("list"),[p,q]=React.useState(null),[g,h]=React.useState(null);var k=n(()=>f.listOptions(b),[b]),c=n(()=>f.listLoadBalancers({networkId:b}),[b,g]);const [l,r]=React.useState(null),[x,t]=React.useState(!1),[y,z]=React.useState([]),u="create"===d;React.useEffect(()=>{u&&f.getSubnets(b).then(a=>{a=(a?.data||[]).map(m=>({name:m.name,value:m.value,cidr:m.cidr}));
z(a)}).catch(a=>console.error("Error fetching subnets:",a))},[u,b]);if(c.error)return React.createElement("div",{className:"alert alert-danger"},c.error.message);if(c.loading||k.loading)return React.createElement("div",{style:{padding:20}},React.createElement("i",{className:"fa fa-spinner fa-spin"})," Loading...");c=c.data.loadbalancers||[];k=k.data||{};const A=()=>{t(!0);f.deleteLoadBalancer(l.id,b).then(()=>{t(!1);r(null);h({msg:"Load Balancer deleted successfully.",type:"success"})})},B=window.Octavia.CreateWizard,
C=window.Octavia.EditLBModal,D=window.Octavia.DeleteConfirmModal;return React.createElement("div",null,g&&React.createElement(w,{msg:g.msg,type:g.type,onClose:()=>h(null)}),l&&React.createElement(D,{lb:l,loading:x,onClose:()=>r(null),onConfirm:A}),"create"===d&&React.createElement(B,{networkId:b,options:{...k,subnets:y},onClose:()=>e("list"),onCreated:()=>{e("list");h({msg:"Load Balancer created.",type:"success"})}}),"edit"===d&&p&&React.createElement(C,{lb:p,networkId:b,onClose:()=>{q(null);e("list")},
onUpdated:()=>{q(null);e("list");h({msg:"Load Balancer updated.",type:"success"})}}),"list"===d&&React.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"15px"}},React.createElement("button",{className:"btn btn-primary",onClick:()=>e("create")},"+ ADD")),"list"===d&&React.createElement("table",{className:"table"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"NAME"),React.createElement("th",null,"VIP"),React.createElement("th",
null,"STATUS"),React.createElement("th",null,"MEMBERS"))),React.createElement("tbody",null,c.map(a=>React.createElement("tr",{key:a.id},React.createElement("td",null,a.name),React.createElement("td",null,a.vip_address),React.createElement("td",null,React.createElement(v,{text:a.provisioning_status,tone:"ACTIVE"===a.provisioning_status?"success":"warning"})),React.createElement("td",null,(a.members||[]).length))),0===c.length&&React.createElement("tr",null,React.createElement("td",{colSpan:"4",className:"text-center text-muted",
style:{padding:"40px 0"}},'No Load Balancers found. Click "+ ADD" to create one.')))))}})();