//# sourceMappingURL=NetworkView.js.map
(function(){window.Octavia.NetworkView=({networkId:b})=>{const e=window.Octavia.api,{Badge:v,useAsync:q,Toast:w}=window.Octavia,[k,d]=React.useState("list"),[r,l]=React.useState(null),[f,g]=React.useState(null);var h=q(()=>e.listOptions(b),[b]),c=q(()=>e.listLoadBalancers({networkId:b}),[b,f]);const [m,n]=React.useState(null),[x,t]=React.useState(!1),[y,z]=React.useState([]),u="create"===k;React.useEffect(()=>{u&&e.getSubnets(b).then(a=>{a=(a?.data||[]).map(p=>({name:p.name,value:p.value,cidr:p.cidr}));
z(a)}).catch(a=>console.error("Error fetching subnets:",a))},[u,b]);if(c.error)return React.createElement("div",{className:"alert alert-danger"},c.error.message);if(c.loading||h.loading)return React.createElement("div",{style:{padding:20}},React.createElement("i",{className:"fa fa-spinner fa-spin"})," Loading...");c=c.data.loadbalancers||[];h=h.data||{};const A=()=>{t(!0);e.deleteLoadBalancer(m.id,b).then(()=>{t(!1);n(null);g({msg:"Load Balancer deleted successfully.",type:"success"})})},B=window.Octavia.CreateWizard,
C=window.Octavia.EditLBModal,D=window.Octavia.DeleteConfirmModal;return React.createElement("div",{style:{padding:"0"}},f&&React.createElement(w,{msg:f.msg,type:f.type,onClose:()=>g(null)}),m&&React.createElement(D,{lb:m,loading:x,onClose:()=>n(null),onConfirm:A}),"create"===k&&React.createElement(B,{networkId:b,options:{...h,subnets:y},onClose:()=>d("list"),onCreated:()=>{d("list");g({msg:"Load Balancer created.",type:"success"})}}),"edit"===k&&r&&React.createElement(C,{lb:r,networkId:b,onClose:()=>
{l(null);d("list")},onUpdated:()=>{l(null);d("list");g({msg:"Load Balancer updated.",type:"success"})}}),React.createElement("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginBottom:15,padding:"0 5px"}},React.createElement("button",{className:"btn btn-primary",onClick:()=>d("create")},"+ ADD")),React.createElement("table",{className:"table table-striped table-hover"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Name"),
React.createElement("th",null,"VIP"),React.createElement("th",null,"Status"),React.createElement("th",null,"Members"),React.createElement("th",null))),React.createElement("tbody",null,c.map(a=>React.createElement("tr",{key:a.id},React.createElement("td",null,a.name),React.createElement("td",null,a.vip_address),React.createElement("td",null,React.createElement(v,{text:a.provisioning_status,tone:"ACTIVE"===a.provisioning_status?"success":"warning"})),React.createElement("td",null,(a.members||[]).length),
React.createElement("td",{style:{textAlign:"right",whiteSpace:"nowrap"}},React.createElement("button",{className:"btn btn-link btn-sm",title:"Edit",onClick:()=>{l(a);d("edit")}},React.createElement("i",{className:"fa fa-pencil",style:{fontSize:"1.2em"}})),React.createElement("button",{className:"btn btn-link btn-sm",title:"Delete",onClick:()=>n(a)},React.createElement("i",{className:"fa fa-trash",style:{fontSize:"1.2em"}}))))),0===c.length&&React.createElement("tr",null,React.createElement("td",{colSpan:"5",
style:{textAlign:"center",padding:40,color:"#999"}},'No Load Balancers found. Click "ADD" to create one.')))))}})();