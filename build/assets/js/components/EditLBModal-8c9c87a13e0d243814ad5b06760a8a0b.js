//# sourceMappingURL=EditLBModal.js.map
(function(){window.Octavia.EditLBModal=({lb:f,networkId:l,onClose:m,onUpdated:u})=>{const k=window.Octavia.api,{Field:n,useAsync:v}=window.Octavia,{Step2_Listener:w,Step3_Pool:x,Step4_Members:y,Step5_Monitor:z}=window.Octavia.Steps,[g,A]=React.useState("general"),[d,p]=React.useState({...f}),[q,r]=React.useState(!1),{loading:t,data:c}=v(async()=>{const [a,b,h]=await Promise.all([k.listListeners(f.id,{networkId:l}),k.listPools(f.id,{networkId:l}),k.getHealthMonitor(f.id,{networkId:l})]);return{...a,
...b,...h}},[f.id]);React.useEffect(()=>{if(c){const b={...d};if(c.listeners&&0<c.listeners.length){var a=c.listeners[0];b.createListener=!0;b.listenerName=a.name;b.listenerProtocol=a.protocol;b.listenerPort=a.protocol_port;b.connectionLimit=a.connection_limit;b.allowedCidrs=(a.allowed_cidrs||[]).join(",")}else b.createListener=!1;c.pools&&0<c.pools.length?(a=c.pools[0],b.createPool=!0,b.poolName=a.name,b.poolAlgorithm=a.lb_algorithm,b.poolProtocol=a.protocol,b.poolDesc=a.description,b.members=a.members||
[]):b.createPool=!1;c.monitor?(a=c.monitor,b.createMonitor=!0,b.monitorName=a.name||"Monitor",b.monitorType=a.type,b.delay=a.delay,b.timeout=a.timeout,b.maxRetries=a.max_retries):b.createMonitor=!1;p(b)}},[c]);const e=(a,b)=>p(h=>({...h,[a]:b}));return React.createElement("div",{className:"modal fade in",style:{display:"block",overflow:"auto"}},React.createElement("div",{className:"modal-dialog modal-lg"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},
React.createElement("button",{type:"button",className:"close",onClick:m,"data-dismiss":"modal","aria-label":"Close"},React.createElement("span",{"aria-hidden":"true"},React.createElement("svg",{version:"1.1",className:"close-icon",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 59.9 59.9",enableBackground:"new 0 0 59.9 59.9",xmlSpace:"preserve"},React.createElement("line",{fill:"none",stroke:"currentColor",strokeMiterlimit:"10",x1:"57.4",y1:"2.5",
x2:"2.5",y2:"57.4"}),React.createElement("line",{fill:"none",stroke:"currentColor",strokeMiterlimit:"10",x1:"2.5",y1:"2.5",x2:"57.4",y2:"57.4"})))),React.createElement("h4",{className:"modal-title"},"Edit Load Balancer")),React.createElement("div",{className:"modal-body",style:{padding:0}},React.createElement("div",{className:"tab-container"},React.createElement("ul",{className:"nav nav-tabs",style:{paddingLeft:20,paddingTop:10}},[{key:"general",title:"General"},{key:"listener",title:"Listener"},
{key:"pool",title:"Pool"},{key:"monitor",title:"Health Monitor"}].map((a,b)=>React.createElement("li",{key:a.key,className:g===a.key?"active":""},React.createElement("a",{href:"#",onClick:h=>{h.preventDefault();A(a.key)}},a.title)))),React.createElement("div",{className:"tab-content",style:{padding:20}},t?React.createElement("div",{style:{textAlign:"center",padding:40}},React.createElement("i",{className:"fa fa-spinner fa-spin"})," Loading..."):React.createElement("div",null,"general"===g&&React.createElement("div",
{className:"form-horizontal"},React.createElement(n,{label:"Name"},React.createElement("input",{className:"form-control",value:d.name||"",onChange:a=>e("name",a.target.value)})),React.createElement(n,{label:"Description"},React.createElement("input",{className:"form-control",value:d.description||"",onChange:a=>e("description",a.target.value)})),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"col-sm-12"},React.createElement("div",{className:"checkbox"},React.createElement("label",
null,React.createElement("input",{type:"checkbox",checked:d.admin_state_up,onChange:a=>e("admin_state_up",a.target.checked)})," Admin State Up"))))),"listener"===g&&React.createElement(w,{data:d,update:e}),"pool"===g&&React.createElement("div",null,React.createElement(x,{data:d,update:e}),React.createElement("hr",null),React.createElement("h5",{style:{fontWeight:600,marginBottom:15}},"Members"),React.createElement(y,{data:d,update:e,options:{instances:[]}})),"monitor"===g&&React.createElement(z,{data:d,
update:e}))))),React.createElement("div",{className:"modal-footer"},React.createElement("button",{className:"btn btn-link",onClick:m},"Cancel"),React.createElement("button",{className:"btn btn-primary",onClick:()=>{r(!0);k.updateLoadBalancer(f.id,d).then(u).catch(a=>{r(!1);alert(a.message)})},disabled:q||t},q?"Saving...":"Save Changes")))),React.createElement("div",{className:"modal-backdrop fade in"}))}})();