//# sourceMappingURL=EditLBModal.js.map
(function(){window.Octavia.EditLBModal=({lb:f,networkId:m,options:n,onClose:p,onUpdated:w})=>{const k=window.Octavia.api,{Field:l,useAsync:x}=window.Octavia,{Step2_Listener:y,Step3_Pool:z,Step4_Members:A,Step5_Monitor:B}=window.Octavia.Steps,[g,C]=React.useState("general"),[d,q]=React.useState({...f}),[r,t]=React.useState(!1),{loading:u,data:c}=x(async()=>{const [a,b,h]=await Promise.all([k.listListeners(f.id,{networkId:m}),k.listPools(f.id,{networkId:m}),k.getHealthMonitor(f.id,{networkId:m})]);
return{...a,...b,...h}},[f.id]);React.useEffect(()=>{if(c){const b={...d};if(c.listeners&&0<c.listeners.length){var a=c.listeners[0];b.createListener=!0;b.listenerName=a.name;b.listenerProtocol=a.protocol;b.listenerPort=a.protocol_port;b.connectionLimit=a.connection_limit;b.allowedCidrs=(a.allowed_cidrs||[]).join(",")}else b.createListener=!1;c.pools&&0<c.pools.length?(a=c.pools[0],b.createPool=!0,b.poolName=a.name,b.poolAlgorithm=a.lb_algorithm,b.poolProtocol=a.protocol,b.poolDesc=a.description,
b.members=a.members||[]):b.createPool=!1;c.monitor?(a=c.monitor,b.createMonitor=!0,b.monitorName=a.name||"Monitor",b.monitorType=a.type,b.delay=a.delay,b.timeout=a.timeout,b.maxRetries=a.max_retries):b.createMonitor=!1;q(b)}},[c]);const e=(a,b)=>q(h=>({...h,[a]:b})),v=[{key:"general",title:"General"},{key:"listener",title:"Listener"},{key:"pool",title:"Pool"},{key:"monitor",title:"Health Monitor"}];return React.createElement("div",{className:"modal fade in",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)",
overflowY:"auto"}},React.createElement("div",{className:"modal-dialog modal-lg"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close",onClick:p,"aria-label":"Close","data-dismiss":"modal"},React.createElement("span",{"aria-hidden":"true"},React.createElement("svg",{version:"1.1",className:"close-icon",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",
y:"0px",viewBox:"0 0 59.9 59.9",enableBackground:"new 0 0 59.9 59.9",xmlSpace:"preserve"},React.createElement("line",{fill:"none",stroke:"currentColor",strokeMiterlimit:"10",x1:"57.4",y1:"2.5",x2:"2.5",y2:"57.4"}),React.createElement("line",{fill:"none",stroke:"currentColor",strokeMiterlimit:"10",x1:"2.5",y1:"2.5",x2:"57.4",y2:"57.4"})))),React.createElement("h4",{className:"modal-title"},"Edit Load Balancer")),React.createElement("div",{className:"modal-body"},React.createElement("div",{className:"wizard",
style:{marginBottom:20}},React.createElement("ul",{className:"breadcrumbs"},v.map((a,b)=>{const h=v.findIndex(D=>D.key===g);return React.createElement("li",{key:a.key,className:`bc ${g===a.key?"active":b<h?"prevActive":""}`,onClick:()=>C(a.key),style:{cursor:"pointer"}},a.title)}))),React.createElement("div",{className:"tab-content",style:{padding:"10px 0"}},u?React.createElement("div",{style:{textAlign:"center",padding:40}},React.createElement("i",{className:"fa fa-spinner fa-spin"})," Loading..."):
React.createElement("div",null,"general"===g&&React.createElement("div",{className:"form-horizontal"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement(l,{label:"Cloud"},React.createElement("input",{className:"form-control",value:n?.optionClouds?.[0]?.name||"None",readOnly:!0,disabled:!0}))),React.createElement("div",{className:"col-md-6"},React.createElement(l,{label:"Resource Pool"},React.createElement("input",{className:"form-control",
value:n?.optionResourcePools?.[0]?.name||"None",readOnly:!0,disabled:!0})))),React.createElement(l,{label:"Name"},React.createElement("input",{className:"form-control",value:d.name||"",onChange:a=>e("name",a.target.value)})),React.createElement(l,{label:"Description"},React.createElement("input",{className:"form-control",value:d.description||"",onChange:a=>e("description",a.target.value)})),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"col-sm-12"},React.createElement("div",
{className:"checkbox"},React.createElement("label",null,React.createElement("input",{type:"checkbox",checked:d.admin_state_up,onChange:a=>e("admin_state_up",a.target.checked)})," Admin State Up"))))),"listener"===g&&React.createElement(y,{data:d,update:e}),"pool"===g&&React.createElement("div",null,React.createElement(z,{data:d,update:e}),React.createElement("hr",null),React.createElement("h5",{style:{fontWeight:600,marginBottom:15}},"Members"),React.createElement(A,{data:d,update:e,options:{instances:[]}})),
"monitor"===g&&React.createElement(B,{data:d,update:e})))),React.createElement("div",{className:"modal-footer"},React.createElement("button",{className:"btn btn-default",onClick:p},"Cancel"),React.createElement("button",{className:"btn btn-success",onClick:()=>{t(!0);k.updateLoadBalancer(f.id,d).then(w).catch(a=>{t(!1);alert(a.message)})},disabled:r||u},r?"Saving...":"Save Changes")))))}})();