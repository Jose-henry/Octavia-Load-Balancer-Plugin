//# sourceMappingURL=NetworkView.js.map
(function(){window.Octavia.NetworkView=({networkId:b})=>{const k=window.Octavia.api,{Badge:x,useAsync:q,Toast:y}=window.Octavia,[d,e]=React.useState("list"),[r,t]=React.useState(null),[l,m]=React.useState(null),f="create"===d,g="edit"===d;var h=q(()=>f||g?k.listOptions(b):Promise.resolve({}),[b,f,g]),c=q(()=>k.listLoadBalancers({networkId:b}),[b,l]);const [n,u]=React.useState(null),[z,v]=React.useState(!1),[w,A]=React.useState([]);React.useEffect(()=>{(f||g)&&k.getSubnets(b).then(a=>{a=(a?.data||
[]).map(p=>({name:p.name,value:p.value,cidr:p.cidr}));A(a)}).catch(a=>console.error("Error fetching subnets:",a))},[f,g,b]);if(c.error)return React.createElement("div",{className:"alert alert-danger"},c.error.message);if(c.loading||(f||g)&&h.loading)return React.createElement("div",{style:{padding:20}},React.createElement("i",{className:"fa fa-spinner fa-spin"})," Loading...");c=c.data.loadbalancers||[];h=h.data||{};const B=()=>{v(!0);k.deleteLoadBalancer(n.id,b).then(()=>{v(!1);u(null);m({msg:"Load Balancer deleted successfully.",
type:"success"})})},C=window.Octavia.CreateWizard,D=window.Octavia.EditLBModal,E=window.Octavia.DeleteConfirmModal;return React.createElement("div",null,l&&React.createElement(y,{msg:l.msg,type:l.type,onClose:()=>m(null)}),n&&React.createElement(E,{lb:n,loading:z,onClose:()=>u(null),onConfirm:B}),"create"===d&&React.createElement(C,{networkId:b,options:{...h,subnets:w},onClose:()=>e("list"),onCreated:()=>{e("list");m({msg:"Load Balancer created.",type:"success"})}}),"edit"===d&&r&&React.createElement(D,
{lb:r,networkId:b,options:{...h,subnets:w},onClose:()=>{t(null);e("list")},onUpdated:()=>{t(null);e("list");m({msg:"Load Balancer updated.",type:"success"})}}),"list"===d&&React.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"15px"}},React.createElement("button",{className:"btn btn-primary",onClick:()=>e("create")},"+ ADD")),"list"===d&&React.createElement("table",{className:"table"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",
null,"NAME"),React.createElement("th",null,"VIP"),React.createElement("th",null,"STATUS"),React.createElement("th",null,"MEMBERS"))),React.createElement("tbody",null,c.map(a=>React.createElement("tr",{key:a.id},React.createElement("td",null,a.name),React.createElement("td",null,a.vip_address),React.createElement("td",null,React.createElement(x,{text:a.provisioning_status,tone:"ACTIVE"===a.provisioning_status?"success":"warning"})),React.createElement("td",null,(a.members||[]).length))),0===c.length&&
React.createElement("tr",null,React.createElement("td",{colSpan:"4",className:"text-center text-muted",style:{padding:"40px 0"}},'No Load Balancers found. Click "+ ADD" to create one.')))))}})();