//# sourceMappingURL=NetworkView.js.map
(function(){window.Octavia.NetworkView=({networkId:d})=>{const f=window.Octavia.api,{Badge:y,useAsync:z,Toast:A}=window.Octavia,[g,h]=React.useState("list"),[n,p]=React.useState(null),[k,q]=React.useState(null),r="create"===g,t="edit"===g,[u,l]=React.useState({}),[v,B]=React.useState([]),[m,w]=React.useState(null),[C,x]=React.useState(!1);var e=z(()=>f.listLoadBalancers({networkId:d}),[d,k]);React.useEffect(()=>{if(r||t){const b={networkId:d};f.getSubnets(d).then(a=>{a=(a?.data||[]).map(c=>({name:c.name,
value:c.value,cidr:c.cidr}));B(a)}).catch(a=>console.error("Error fetching subnets:",a));f.getProjects(b).then(a=>{l(c=>({...c,optionProjects:a.data||[],optionClouds:a.optionClouds||[],optionResourcePools:a.resourcePools||[]}))}).catch(a=>console.error(a));f.getInstances(b).then(a=>{l(c=>({...c,instances:a.data||[]}))}).catch(a=>console.error(a));f.getFloatingIpPools(b).then(a=>{l(c=>({...c,optionFloatingIpPools:a.data||[]}))}).catch(a=>console.error(a))}},[r,t,d]);if(e.error)return React.createElement("div",
{className:"alert alert-danger"},e.error.message);if(e.loading)return React.createElement("div",{style:{padding:20}},React.createElement("i",{className:"fa fa-spinner fa-spin"})," Loading...");e=e.data.loadbalancers||[];const D=()=>{x(!0);f.deleteLoadBalancer(m.id,d).then(()=>{x(!1);w(null);q({msg:"Load Balancer deleted successfully.",type:"success"})})},E=window.Octavia.CreateWizard,F=window.Octavia.EditLBModal,G=window.Octavia.DeleteConfirmModal;return React.createElement("div",null,k&&React.createElement(A,
{msg:k.msg,type:k.type,onClose:()=>q(null)}),m&&React.createElement(G,{lb:m,loading:C,onClose:()=>w(null),onConfirm:D}),"create"===g&&React.createElement(E,{networkId:d,options:{...u,subnets:v},onClose:()=>h("list"),onCreated:()=>{h("list")}}),"edit"===g&&n&&React.createElement(F,{lb:n,networkId:d,options:{...u,subnets:v},onClose:()=>{p(null);h("list")},onUpdated:()=>{p(null);h("list")}}),"list"===g&&React.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"15px"}},
React.createElement("button",{className:"btn btn-primary",onClick:()=>h("create")},"+ ADD")),"list"===g&&React.createElement("table",{className:"table"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"NAME"),React.createElement("th",null,"VIP"),React.createElement("th",null,"STATUS"),React.createElement("th",null,"MEMBERS"))),React.createElement("tbody",null,e.map(b=>React.createElement("tr",{key:b.id},React.createElement("td",null,b.name),React.createElement("td",
null,b.vip_address),React.createElement("td",null,React.createElement(y,{text:b.provisioning_status,tone:"ACTIVE"===b.provisioning_status?"success":"warning"})),React.createElement("td",null,(b.members||[]).length))),0===e.length&&React.createElement("tr",null,React.createElement("td",{colSpan:"4",className:"text-center text-muted",style:{padding:"40px 0"}},'No Load Balancers found. Click "+ ADD" to create one.')))))}})();