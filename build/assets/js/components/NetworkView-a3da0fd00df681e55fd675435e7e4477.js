//# sourceMappingURL=NetworkView.js.map
(function(){window.Octavia.NetworkView=({networkId:b})=>{const g=window.Octavia.api,{Badge:w,useAsync:n,Toast:x}=window.Octavia,[d,e]=React.useState("list"),[p,q]=React.useState(null),[h,k]=React.useState(null);var f=n(()=>g.listOptions(b),[b]),c=n(()=>g.listLoadBalancers({networkId:b}),[b,h]);const [l,r]=React.useState(null),[y,t]=React.useState(!1),[u,z]=React.useState([]),v="create"===d;React.useEffect(()=>{v&&g.getSubnets(b).then(a=>{a=(a?.data||[]).map(m=>({name:m.name,value:m.value,cidr:m.cidr}));
z(a)}).catch(a=>console.error("Error fetching subnets:",a))},[v,b]);if(c.error)return React.createElement("div",{className:"alert alert-danger"},c.error.message);if(c.loading||f.loading)return React.createElement("div",{style:{padding:20}},React.createElement("i",{className:"fa fa-spinner fa-spin"})," Loading...");c=c.data.loadbalancers||[];f=f.data||{};const A=()=>{t(!0);g.deleteLoadBalancer(l.id,b).then(()=>{t(!1);r(null);k({msg:"Load Balancer deleted successfully.",type:"success"})})},B=window.Octavia.CreateWizard,
C=window.Octavia.EditLBModal,D=window.Octavia.DeleteConfirmModal;return React.createElement("div",null,h&&React.createElement(x,{msg:h.msg,type:h.type,onClose:()=>k(null)}),l&&React.createElement(D,{lb:l,loading:y,onClose:()=>r(null),onConfirm:A}),"create"===d&&React.createElement(B,{networkId:b,options:{...f,subnets:u},onClose:()=>e("list"),onCreated:()=>{e("list");k({msg:"Load Balancer created.",type:"success"})}}),"edit"===d&&p&&React.createElement(C,{lb:p,networkId:b,options:{...f,subnets:u},
onClose:()=>{q(null);e("list")},onUpdated:()=>{q(null);e("list");k({msg:"Load Balancer updated.",type:"success"})}}),"list"===d&&React.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"15px"}},React.createElement("button",{className:"btn btn-primary",onClick:()=>e("create")},"+ ADD")),"list"===d&&React.createElement("table",{className:"table"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"NAME"),React.createElement("th",
null,"VIP"),React.createElement("th",null,"STATUS"),React.createElement("th",null,"MEMBERS"))),React.createElement("tbody",null,c.map(a=>React.createElement("tr",{key:a.id},React.createElement("td",null,a.name),React.createElement("td",null,a.vip_address),React.createElement("td",null,React.createElement(w,{text:a.provisioning_status,tone:"ACTIVE"===a.provisioning_status?"success":"warning"})),React.createElement("td",null,(a.members||[]).length))),0===c.length&&React.createElement("tr",null,React.createElement("td",
{colSpan:"4",className:"text-center text-muted",style:{padding:"40px 0"}},'No Load Balancers found. Click "+ ADD" to create one.')))))}})();