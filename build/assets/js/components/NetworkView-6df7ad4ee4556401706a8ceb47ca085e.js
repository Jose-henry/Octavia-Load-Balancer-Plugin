//# sourceMappingURL=NetworkView.js.map
(function(){window.Octavia.NetworkView=({networkId:d})=>{const k=window.Octavia.api,{Badge:l,useAsync:w,Toast:B}=window.Octavia,[b,g]=React.useState("list"),[c,h]=React.useState("lbs"),[x,r]=React.useState(null),[m,n]=React.useState(null);var p=w(()=>k.listOptions(d),[d]),e=w(()=>k.listLoadBalancers({networkId:d}),[d,m]);const [t,u]=React.useState(null),[C,y]=React.useState(!1),[D,E]=React.useState([]),z="create"===b;React.useEffect(()=>{z&&k.getSubnets(d).then(a=>{a=(a?.data||[]).map(f=>({name:f.name,
value:f.value,cidr:f.cidr}));E(a)}).catch(a=>console.error("Error fetching subnets:",a))},[z,d]);if(e.error)return React.createElement("div",{className:"alert alert-danger"},e.error.message);if(e.loading||p.loading)return React.createElement("div",{style:{padding:20}},React.createElement("i",{className:"fa fa-spinner fa-spin"})," Loading...");e=e.data.loadbalancers||[];p=p.data||{};const A=e.flatMap(a=>(a.listeners||[]).map(f=>({...f,lbName:a.name}))),q=e.flatMap(a=>(a.pools||[]).map(f=>({...f,lbName:a.name})));
let v=[];q.forEach(a=>{a.members&&a.members.forEach(f=>v.push({...f,poolName:a.name,lbName:a.lbName}))});const F=[];q.forEach(a=>{a.healthmonitor_id&&F.push({id:a.healthmonitor_id,poolName:a.name,lbName:a.lbName})});const G=()=>{y(!0);k.deleteLoadBalancer(t.id,d).then(()=>{y(!1);u(null);n({msg:"Load Balancer deleted successfully.",type:"success"})})},H=window.Octavia.CreateWizard,I=window.Octavia.EditLBModal,J=window.Octavia.DeleteConfirmModal;return React.createElement("div",{style:{padding:"0"}},
m&&React.createElement(B,{msg:m.msg,type:m.type,onClose:()=>n(null)}),t&&React.createElement(J,{lb:t,loading:C,onClose:()=>u(null),onConfirm:G}),"create"===b&&React.createElement(H,{networkId:d,options:{...p,subnets:D},onClose:()=>g("list"),onCreated:()=>{g("list");n({msg:"Load Balancer created.",type:"success"})}}),"edit"===b&&x&&React.createElement(I,{lb:x,networkId:d,onClose:()=>{r(null);g("list")},onUpdated:()=>{r(null);g("list");n({msg:"Load Balancer updated.",type:"success"})}}),"list"===b&&
React.createElement("ul",{className:"nav nav-tabs",style:{marginBottom:"15px"}},React.createElement("li",{className:"lbs"===c?"active":""},React.createElement("a",{href:"#",onClick:a=>{a.preventDefault();h("lbs")}},"Load Balancers")),React.createElement("li",{className:"listeners"===c?"active":""},React.createElement("a",{href:"#",onClick:a=>{a.preventDefault();h("listeners")}},"Listeners")),React.createElement("li",{className:"pools"===c?"active":""},React.createElement("a",{href:"#",onClick:a=>
{a.preventDefault();h("pools")}},"Pools")),React.createElement("li",{className:"members"===c?"active":""},React.createElement("a",{href:"#",onClick:a=>{a.preventDefault();h("members")}},"Members")),React.createElement("li",{className:"monitors"===c?"active":""},React.createElement("a",{href:"#",onClick:a=>{a.preventDefault();h("monitors")}},"Monitors"))),"list"===b&&React.createElement("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginBottom:15,padding:"0 5px"}},React.createElement("button",
{className:"btn btn-primary",onClick:()=>g("create")},"+ ADD")),"list"===b&&"lbs"===c&&React.createElement("table",{className:"table table-striped table-hover"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Name"),React.createElement("th",null,"VIP"),React.createElement("th",null,"Status"),React.createElement("th",null,"Members"),React.createElement("th",null))),React.createElement("tbody",null,e.map(a=>React.createElement("tr",{key:a.id},React.createElement("td",
null,a.name),React.createElement("td",null,a.vip_address),React.createElement("td",null,React.createElement(l,{text:a.provisioning_status,tone:"ACTIVE"===a.provisioning_status?"success":"warning"})),React.createElement("td",null,(a.members||[]).length),React.createElement("td",{style:{textAlign:"right",whiteSpace:"nowrap"}},React.createElement("button",{className:"btn btn-link btn-sm",title:"Edit",onClick:()=>{r(a);g("edit")}},React.createElement("i",{className:"fa fa-pencil",style:{fontSize:"1.2em"}})),
React.createElement("button",{className:"btn btn-link btn-sm",title:"Delete",onClick:()=>u(a)},React.createElement("i",{className:"fa fa-trash",style:{fontSize:"1.2em"}}))))),0===e.length&&React.createElement("tr",null,React.createElement("td",{colSpan:"5",style:{textAlign:"center",padding:40,color:"#999"}},'No Load Balancers found. Click "ADD" to create one.')))),"list"===b&&"listeners"===c&&React.createElement("table",{className:"table table-striped table-hover"},React.createElement("thead",null,
React.createElement("tr",null,React.createElement("th",null,"Name"),React.createElement("th",null,"Protocol"),React.createElement("th",null,"Port"),React.createElement("th",null,"Default Pool"),React.createElement("th",null,"Status"),React.createElement("th",null))),React.createElement("tbody",null,A.map(a=>React.createElement("tr",{key:a.id},React.createElement("td",null,a.name||a.id),React.createElement("td",null,a.protocol),React.createElement("td",null,a.protocol_port),React.createElement("td",
null,a.default_pool_id?"Yes":"No"),React.createElement("td",null,React.createElement(l,{text:a.provisioning_status,tone:"ACTIVE"===a.provisioning_status?"success":"warning"})),React.createElement("td",null,React.createElement("span",{className:"text-muted text-sm px-2"},"(",a.lbName,")")))),0===A.length&&React.createElement("tr",null,React.createElement("td",{colSpan:"6",style:{textAlign:"center",padding:40,color:"#999"}},"No Listeners found attached to these Load Balancers.")))),"list"===b&&"pools"===
c&&React.createElement("table",{className:"table table-striped table-hover"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Name"),React.createElement("th",null,"Protocol"),React.createElement("th",null,"Algorithm"),React.createElement("th",null,"Members"),React.createElement("th",null,"Status"),React.createElement("th",null))),React.createElement("tbody",null,q.map(a=>React.createElement("tr",{key:a.id},React.createElement("td",null,a.name||a.id),React.createElement("td",
null,a.protocol),React.createElement("td",null,a.lb_algorithm),React.createElement("td",null,(a.members||[]).length),React.createElement("td",null,React.createElement(l,{text:a.provisioning_status,tone:"ACTIVE"===a.provisioning_status?"success":"warning"})),React.createElement("td",null,React.createElement("span",{className:"text-muted text-sm px-2"},"(",a.lbName,")")))),0===q.length&&React.createElement("tr",null,React.createElement("td",{colSpan:"6",style:{textAlign:"center",padding:40,color:"#999"}},
"No Pools found attached to these Load Balancers.")))),"list"===b&&"members"===c&&React.createElement("table",{className:"table table-striped table-hover"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Name"),React.createElement("th",null,"Address / Port"),React.createElement("th",null,"Weight"),React.createElement("th",null,"Pool"),React.createElement("th",null,"Status"),React.createElement("th",null))),React.createElement("tbody",null,v.map(a=>React.createElement("tr",
{key:a.id},React.createElement("td",null,a.name||a.id),React.createElement("td",null,a.address,":",a.protocol_port),React.createElement("td",null,a.weight),React.createElement("td",null,a.poolName),React.createElement("td",null,React.createElement(l,{text:a.provisioning_status,tone:"ACTIVE"===a.provisioning_status?"success":"warning"})),React.createElement("td",null,React.createElement("span",{className:"text-muted text-sm px-2"},"(",a.lbName,")")))),0===v.length&&React.createElement("tr",null,React.createElement("td",
{colSpan:"6",style:{textAlign:"center",padding:40,color:"#999"}},"No Members found in any Pools.")))),"list"===b&&"monitors"===c&&React.createElement("table",{className:"table table-striped table-hover"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Name"),React.createElement("th",null,"Type"),React.createElement("th",null,"Delay/Timeout"),React.createElement("th",null,"Pool"),React.createElement("th",null,"Status"),React.createElement("th",null))),
React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",{colSpan:"6",style:{textAlign:"center",padding:40,color:"#999"}},"Monitors are connected to Pools.")))))}})();